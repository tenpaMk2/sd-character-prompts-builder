---
import Layout from "../layouts/Layout.astro";
import CategoryArea from "../components/CategoryArea.astro";
import { tabNames, type TabKey } from "../components/Tabs.astro";
import { allCategories, type Category } from "../libs/prompts-store";
import OutputArea from "../components/OutputArea.astro";

const tabKey: TabKey = `main`;
const tabName = tabNames[tabKey];
const layoutInfo = {
  tabKey,
  tabName,
};

const names: { [K in Category]: string } = {
  eyesColors: `ç›®ã®è‰²`,
  eyesShapes: `ç›®ã®å½¢çŠ¶`,
  eyebrows: `çœ‰æ¯›`,
  eyelashes: `ç«æ¯›`,
  hairColor: `é«ªè‰²`,
  hairLengths: `é«ªã®é•·ã•`,
  hairStyles: `é«ªå‹`,
  tiedHair: `é«ªã®çµã³æ–¹`,
  frontHair: `å‰é«ª`,
  sidelocks: `æ¨ªé«ª`,
  topOfTheHead: `é ­é ‚`,
  hairMisc: `é«ª: ãã®ä»–`,
  hairOrnament: `é«ªé£¾ã‚Š`,
  hairBow: `é«ª: ğŸ€`,
  hairRibbon: `é«ª: ğŸ—`,
  hairband: `é«ª: ãƒ˜ã‚¢ãƒãƒ³ãƒ‰`,
  misc: `ãã®ä»–`,
  breasts: `èƒ¸ã®å¤§ãã•`,
} as const;
---

<Layout {...layoutInfo}>
  <before-unload-script data-prod={import.meta.env.PROD} style="display:none"
  ></before-unload-script>
  {
    allCategories.map((category) => (
      <CategoryArea name={names[category]} key={category} />
    ))
  }
  <OutputArea />
</Layout>

<script>
  // Enable scripts only production mode.
  class BeforeUnloadScript extends HTMLElement {
    constructor() {
      super();

      const isProduction = this.dataset.prod === ``;
      if (isProduction) {
        window.addEventListener(`beforeunload`, (event: BeforeUnloadEvent) => {
          event.preventDefault();
          event.returnValue = ``;
        });
      }
    }
  }

  customElements.define(`before-unload-script`, BeforeUnloadScript);
</script>
